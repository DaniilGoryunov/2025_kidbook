# Отчет по лабораторной работе

## Состав команды

| ФИО                            | Что делал                                                                                                       | Оценка |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------- | ------ |
| Дударь Юрий Мохсенович         | 3 термина, отчет, автоматизация генерации md страничек с api gigachat                                           |        |
| Фомин Иван Дмитриевич          | 3 термина, валидация результатов генерации, генерация картинок, автоматическое проставление перекрёстных ссылок |        |
| Шляхтуров Александр Викторович | 3 термина, автоматизация генерации md страничек с api gigachat                                                  |        |
| Федеров Алексей Алексеевич     | 3 термина, разработка терминов, сбор информации, автоматическое проставление перекрёстных ссылок                |        |
| Любарский Иван Владимирович    | 3 термина, автоматическое проставление перекрёстных ссылок, сбор информации                                                      |        |

## Концептуализация предметной области

В рамках нашей работы мы проводили концептуализацию предметной области **финансовой грамотности**, чтобы создать структурированную модель знаний, которая будет понятна детям. Концептуализация включала в себя:

1. **Определение ключевых понятий** – мы выделили 15 базовых терминов, которые составляют основу финансовой грамотности. Среди них:  **Финансовая грамотность, Бюджет, Доход, Расходы, Сбережения, Инвестиции, Кредит, Проценты, Налог, Финансовый план, Цели сбережений, Страхование, Финансовые риски, Кредитная история, Экономия**
2. **Выявление связей между понятиями** – построили логические взаимосвязи между терминами, чтобы показать их влияние друг на друга. Например, доход и расходы напрямую связаны с бюджетом, а инвестиции – с финансовыми рисками.
3. **Создание графической модели** – с помощью **PlantUML** мы визуализировали структуру связей между понятиями в виде графа. Наглядно представили, как элементы финансовой грамотности взаимодействуют друг с другом.

### Используемые инструменты

Для построения концептуальной модели и визуализации знаний использовались:

- **Wikidata и DBpedia** – для анализа существующих онтологий и сбора информации о финансовых терминах.
- **PlantUML** – для построения графа терминов и связей между ними.
- **Mermaid.js** – как альтернативный инструмент для представления диаграмм.

### Связи между онтологиями:

- **Финансовая грамотность** связана с **Бюджетом**, **Доходами**, **Расходами** и другими понятиями как основа для понимания этих процессов.
- **Бюджет** связан с **Доходами** и **Расходами**, также влияет на **Сбережения** и **Инвестиции**.
- **Инвестиции** связаны с понятием **Рисков**, потому что всегда есть шанс потери денег, но также и с **Целями сбережений**, поскольку инвестирование часто помогает достичь долгосрочных целей.
- **Кредит** связан с **Процентами**, **Кредитной историей** и **Финансовым планом**.
- **Налоги** влияют на общий **Финансовый план** и могут быть связаны с **Государственным страхованием**.
- **Финансовое планирование** помогает управлять не только текущими расходами, но и **Сбережениями**, а также учитывает возможные **Риски**.
- **Страхование** помогает уменьшить **Риски**, а также связано с понятием **Экономии**, поскольку уменьшает возможные финансовые потери.

### Получившийся граф
[![graph.png](https://i.postimg.cc/130Hp53F/graph.png)](https://postimg.cc/k24KCC8M)

  

## Написание текстов

### Автоматическая генерация контента

Для написания текстов мы использовали **LLM API GigaChat**, который позволил автоматически генерировать объяснения финансовых терминов, адаптированные для детей. Весь процесс был реализован программно, для поддержания единообразия стиля и высокую скорость создания материалов.

Мы подготовили список тем, соответствующих концептуальной модели, и передавали их в **GigaChat API** с помощью Python-скрипта. Для этого использовался следующий промпт:

```plaintext
  Представь, что ты специалист по работе с детьми. Ты очень хорошо умеешь объяснять сложные темы простыми словами. Так же ты очень хорошо знаешь тему финансов и финансовой грамотности.
  Твоя задача – тебе будут приходить понятия. Ты должен будешь написать дллинную, полную, яркую, веселую и познавательную статью по заданному понятию. Пиши для ребенка 7 лет.
   Все термины, относящиеся к перекрестным понятиям пометь. Понятия, о которых пойдет речь:

    "Финансовая грамотность", "Бюджет", "Доход", "Расходы", "Сбережения", "Инвестиции", "Кредит", "Проценты", "Налог", "Финансовый план", "Цели сбережений", "Страхование", "Финансовые риски", "Кредитная история", "Экономия"

    Правила:
    - На выходе должна быть markdown страница.
    - Используй простые слова.
    - Добавляй эмодзи. Чем их больше, тем лучше.
    - Приводи яркие примеры из жизни детей, которые будут раскрывать заданную тему.
    - Для всех терминов делай сноски с определениями.
    - В начале дай определение простыми словами, потом расскажи интересную историю или аналогию.
    - Сделай небольшой вывод, который поможет запомнить материал.
    - Старайся делать структурированно.

    Понятие: {query} 
```

### Расстановка перекрёстных ссылок

Для удобства навигации по энциклопедии и создания связности между терминами мы реализовали **автоматическую расстановку ссылок**. Это было сделано с помощью библиотеки **pymorphy3**, которая позволяет приводить слова к начальной форме (лемматизация) и находить их в тексте.

Алгоритм работы:
1. **Загружались все markdown-файлы** с определениями терминов.
2. **Создавался словарь терминов и их путей** на основе JSON-файла.
3. **Каждое слово в тексте проверялось**, и если оно совпадало с термином из словаря (с учётом падежей и склонений), оно заменялось на markdown-ссылку.
4. **Обновлённые файлы сохранялись** с уже вставленными ссылками.


Пример форматирования ссылки в тексте:

```markdown
Если у тебя есть [бюджет](budget.md), ты можешь планировать свои [расходы](expenses.md) и [сбережения](saving.md).
```
### Генерация изображений

Для визуального сопровождения статей мы использовали **Flux Shell (квантованную версию Flux Pro)**. Это позволило нам **генерировать качественные и стилизованные иллюстрации**, соответствующие тематике финансовой грамотности.

#### Как мы использовали Flux Shell

1. **Генерация изображений по текстовому описанию** – мы формировали промпты с учётом ключевых понятий.
2. **Оптимизация стилизации** – изображения были адаптированы для детской аудитории, с мягкими цветами и дружелюбным дизайном.
3. **Автоматическое присвоение изображений статьям** – файлы с картинками привязывались к соответствующим темам.

### Итоговые результаты

- **Нам не пришлось вручную копировать тексты**, всё было автоматизировано.
- **Единообразный стиль объяснений** благодаря единому промпту.
- **Перекрёстные ссылки добавлены автоматически**, для связности контента.
- **Детский, дружелюбный тон и использование эмодзи** сделали тексты более увлекательными.


  

## Выводы
### Сложности, с которыми мы столкнулись

1. **Генерация детских объяснений через LLM**
    - Проблема: Иногда GigaChat давал слишком сложные объяснения или использовал формальный стиль.
    - Решение: Улучшили промпт, добавив конкретные инструкции, включая просьбу использовать сравнения и эмодзи.
    - Итог: После нескольких итераций текст стал понятнее и дружелюбнее.
    
1. **Автоматическая расстановка ссылок**
    - Проблема: pymorphy3 не всегда правильно определял начальную форму слов (особенно сложные составные термины).
    - Решение: Добавили список исключений и вручную дополнили словарь терминов.
    - Итог: Ссылки расставляются в большинстве случаев корректно, но остаётся небольшой процент ошибок, который лучше доработать.
    
1. **Структурирование знаний в графе**
    - Проблема: Связи между некоторыми понятиями были неоднозначными (например, связь "инвестиции" и "финансовый риск" может иметь разный смысл).
    - Решение: Добавили разные типы связей (иерархические, причинно-следственные, ассоциативные).
    - Итог: Граф получился логичным, но в будущем можно детализировать связи.


### Что удалось хорошо

✅ **Автоматизировали генерацию текстов**.  
✅ **Перекрёстные ссылки работают**, улучшая навигацию по энциклопедии.  
✅ **Граф знаний визуализирован**, и он помогает понимать структуру финансовой грамотности.  
✅ **Тексты адаптированы для детей**.

### Что можно улучшить

🔹 **Тонкая настройка LLM** — можно попробовать другие модели или добавить дополнительные примеры в промпт.  
🔹 **Улучшение алгоритма расстановки ссылок** — добавить поддержку сложных терминов и учёт контекста.  
🔹 **Дополнение графа** — сделать связи ещё более детализированными, возможно, используя онтологии.  